<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1"/>
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
        <title> MMU Match Chat </title>
    </head>
    <header>
        <div>MMU Match Chat</div>
    </header>

    <body>
        <div class="star-container"></div>
        <div class="success-content">
            <div class="avatars">
                <div class="avator">
                    <img src="{{url_for('static', filename='avatar' ~ user1.avatar_type ~ '.png')}}" alt="avatar">
                </div>
                <p>Are connected!</p>
                <div class="avatar">
                    <img src="{{url_for('static', filename='avatar' ~ user2.avatar_type ~ '.png')}}" alt="avatar">
                </div>
            </div>
            <h3 style="color: blue;">Waiting for connection...</h3>
        </div>

        <script>
        const redirect_url = "{{ redirect_url }}";   //get redirect_url variable
        setTimeout(function() {       //wait 3s
            window.location.href = redirect_url
        }, 3000);    // 3s

        const container = document.querySelector(".star-container");
        function createStar(){
            const star = document.createElement("div");
            star.classlist.add("star");

            // RANDOM POSITION & SIZE
            star.style.left = Math.random()*100 + "vw" ;
            const size = Math.random()*8+4;
            star.style.width = size + "px" ;
            star.style.height = size + "px" ;

            // RANDOM COLOR
            star.style.backgroundColor = Math.random() > 0.5 ? "#B22222" : "#1E90FF";

            // ANIMATION
            star.style.animationDuration = 3 + Math.random() * 2 + "s";
            star.style.animationDelay = Math.random() * 2 + "s";

            container.appendChild(star);
             
            setTimeout(() => star.remove(), 6000);
            }
            setInterval(createStar, 200);
            const redirect_url = "{{redirect_url}}"
            setTimeout(()=>{
                window.location.href = redirect_url;
            },3000)
        </script>
    </body>
</html>