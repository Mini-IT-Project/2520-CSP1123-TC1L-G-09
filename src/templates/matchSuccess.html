<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1"/>
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
        <title> MMU Match Chat </title>
    </head>
    
    <header style="justify-content: center;">
        <div>MMU Match Chat</div>
    </header>

    <body class="match-success">
        <div class="star-container"></div>
        <div class="success-content">
            <div class="connected-row">
                <div class="avatar">
                    <img src="{{url_for('static', filename='avatar' ~ user1.avatar_type ~ '.png')}}" alt="avatar">
                </div>
                <p class="connected-text">Are connected!</p>
                <div class="avatar">
                    <img src="{{url_for('static', filename='avatar' ~ user2.avatar_type ~ '.png')}}" alt="avatar">
                </div>
            </div>

            <div class="waiting-row">
                <h3 class="waiting-text">Waiting for connection...</h3>
            </div>
        </div>
        
        <script>
        const container = document.querySelector(".star-container");

        function createStar(){
            const star = document.createElement("div");
            star.classList.add("star");

            //RANDOM POSITION &  SIZE
            star.style.left = Math.random () * 100 + "vw";
            const size = Math.random() * 30 + 25;
            star.style.width = size + "px";
            star.style.height = size + "px";

            //RANDOM COLOR
            star.style.backgroundColor = Math.random() > 0.5 ? "#B22222" : "#1E90FF";

            //ANIMATION
            star.style.animationDuration = 3 + Math.random() * 2 + "s";
            container.appendChild(star);
            setTimeout(() => star.remove(),6000);
        }

        //EVERY 200MS CREATE A STAR
        setInterval(createStar,200);

        const redirect_url = "{{ redirect_url }}";   //get redirect_url variable
        setTimeout(function() {       //wait 3s
            window.location.href = redirect_url
        }, 3000);    // 3s
        </script>
    </body>
</html>