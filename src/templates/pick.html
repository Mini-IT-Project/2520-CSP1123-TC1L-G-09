<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Letâ€™s see what is inside the bottle!</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <!-- Header Section -->
    <header>
        <!-- Logo linked to homepage -->
        <a href="{{url_for('main.homepage')}}" style="position: absolute; left: 80px; transform: translateX(-50%); top: -10px;">
            <img src="{{url_for('static', filename='ebeemmu.png')}}" alt="logo" width="150" height="105" style="margin-left: 10px;">
        </a>
        <!-- Back text near logo -->
        <div style="color: white; position: absolute; left: 130px; top: 70px; font-size: 18px;">Back</div>
        You got a Bottle!
        <!-- Navigation bar -->
        <nav>
            <ul>
                <li><a href="{{ url_for('forum.homepage') }}">Forum</a></li>
                <li><a href="{{ url_for('MatchChat.home') }}">Match Chat</a></li>
                <li><a href="{{ url_for('bottle.DriftingBottle') }}">Drifting Bottle</a></li>
                <li><a href="{{ url_for('profile.myProfile') }}">Profile</a></li>
                <li>
                {% if 'user_id' in session %}
                <!-- Show Welcome if user is logged in -->
                <span style="color: rgb(255, 255, 255); font-weight: bold;">Welcome</span>
                {% else %}
                <!-- Show login button if not logged in -->
                <a href="{{ url_for('login.home') }}" class="homepage-login">Login</a>
                {% endif %}
                </li>
            </ul>
        </nav>
    </header>
    
    <!-- Main Content -->
    <main>
    <div class="bottle-container">
        <!-- Background looping video -->
        <video autoplay loop muted playsinline class="bottle-video">
            <source src="{{ url_for('static', filename='bottle_bg.mp4') }}" type="video/mp4">
            Your browser does not support the video tag.
        </video>

        <!-- Background ocean sound -->
        <audio id ="ocean" autoplay loop hidden>
            <source src="{{ url_for('static', filename='ocean.mp3') }}" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>

        <!-- If a bottle exists -->
        {% if bottle %}
            <div class="bottle-wrapper">
                <div class="bottle_content">
                    <!-- Show bottle text content -->
                    {% if bottle.content %}
                        <p>{{ bottle.content }}</p>
                    {% endif %}

                    <!-- Show media depending on file type -->
                    {% if bottle.file_path %}
                        {% if bottle.file_type == 'image' %}
                            <img src="{{ url_for('static', filename=bottle.file_path) }}" alt="Bottle Image" style="max-width: 400px;">
                        {% elif bottle.file_type == 'audio' %}
                            <audio controls>
                               <source src="{{ url_for('static', filename=bottle.file_path) }}">
                               Your browser does not support the audio element.
                            </audio>
                        {% elif bottle.file_type == 'video' %}
                            <video controls style="max-width:100%;">
                                <source src="{{ url_for('static', filename=bottle.file_path) }}">
                                Your browser does not support the video tag.
                            </video>
                        {% endif %}
                    {% endif %}
                </div>

                <!-- Footer with back button -->
                <div class="bottle-footer">
                    <a href="{{ url_for('bottle.DriftingBottle') }}">Back to homepage</a>
                </div>
            </div>

        <!-- If no bottle is available -->
        {% else %}
            <div class="bottle-empty">
                <p>The sea is still empty...ðŸŒŠ</p>
                <a href="{{ url_for('bottle.DriftingBottle') }}">Back to homepage</a>
            </div>
        {% endif %}
    </main>

    <!-- JavaScript for adjusting audio volume -->
    <script>
        const audio = document.getElementById('ocean');
        if (audio){
        audio.volumn = 0.28;
        }
    </script>
</body>
</html>