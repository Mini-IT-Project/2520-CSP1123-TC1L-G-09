<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1"/>
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
        <title> MY PROFILE </title>
    </head>
    <header>
        <div>MY PROFILE</div>
        <nav>
            <ul>
                <li><a href="{{ url_for('forum.homepage') }}">Forum</a></li>
                <li><a href="{{ url_for('main.match_chat') }}">Match Chat</a></li>
                <li><a href="{{ url_for('bottle.DriftingBottle') }}">Drifting Bottle</a></li>
                <li><a href="{{ url_for('profile.profile') }}">Profile</a></li>
                <li>
                {% if 'user_id' in session %}
                <span style="color: rgba(35, 35, 255, 0.811); font-weight: bold;">Welcome</span>
                {% else %}
                <a href="{{ url_for('login.home') }}" class="homepage-login">Login</a>
                {% endif %}
                </li>
            </ul>
        </nav>
    </header>
    <body>
        <div class="profile-card">
            <div class="profile-tab">
                <a href="{{url_for('profile.myProfile')}}">My Profile</a>
                <a href="{{url_for('profile.profile')}}">History</a>
                <a href="{{url_for('profile.settings')}}">Settings</a>
            </div>

            <div class="avatar">
                {% if user.avatar %}
                <img src="{{url_for('static',filename='uploads/' + user.avatar)}}" alt="Avatar">
                {% else %}
                <img src="{{url_for('static',filename='avatar.png')}}" alt="Default Avatar">
                {% endif %}
            </div>
            <h2> {{user.username}}</h2>

            <div class="profile-section">
                <h3> MY POST</h3>
                <ul>
                    {% for post in user.posts %}
                    <li>
                        <strong>{{post.title}}</strong> - {{post.content[:50]}}...
                    </li>
                    {% else %}
                    <li> No Post Yet...</li>
                    {% endfor %}
                </ul>
            </div>

            <div class="profile-section">
                <h3>LIKED POSTS</h3>
                <ul>
                    {% for post in user.likes %}
                    <li>
                      <strong>{{post.title}}</strong> - {{post.content[:50]}}...  
                    </li>
                    {% else %}
                    <li> No Liked Posts Yet...</li>
                    {% endfor %}
                </ul>
            </div>

            <div class="profile-section">
                <h3>MY COMMENTS</h3>
                <ul>
                    {% for comment in user.comments %}
                    <li>
                        {{comment.body[:80]}}...
                    </li>
                    {% else %}
                    <li> No Comments Yet...</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </body>
</html>